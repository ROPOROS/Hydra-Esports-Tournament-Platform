{% extends 'base.html.twig' %}

{% block title %}Jeux
{% endblock %}

{% block body %}
	{% block header %}
		{{ parent() }}
	{% endblock %}
	<div style="margin : 10rem 10rem;">
		<h4>
		{% if permission == "admin" %}
		Espace Admin
		{% else %}
		Accueil
		{% endif %}
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#d53235" viewbox="0 0 256 256">
				<rect width="256" height="256" fill="none"></rect>
				<polyline points="96 48 176 128 96 208" fill="none" stroke="#d53235" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></polyline>
			</svg>
			Jeux</h4>
		<br>
		<label class="label-form" style="width:30%;">
		<select onchange="redirectMe(this);" style="margin-bottom:32px;">
			
			<option value="null" > -- Choisissez le type Jeu -- </option>
			<option value="null" > Tous </option>
			{% for type in types %}
				<option value="{{type}}"
				{% if type == idJeu %}
				selected
				{% endif %}
				 > {{type}} </option>
			{% endfor %}
		<select>
		</label>

		<script>
		function redirectMe(element)
		{
			let path =window.location.href;
			if(!path.includes("?type="))
				window.location.href= path + "?type="+element.value;
			else{
				let secondPart=path.split("?type=")[1];
				window.location.href = path.replace(secondPart,element.value);
			}
    		

		}
		</script>


		{% for message in app.flashes('info') %}
			<div class="alert fade alert-simple alert-success alert-dismissible text-left font__family-montserrat font__size-16 font__weight-light brk-library-rendered rendered show ">

				<i class="start-icon far fa-check-circle faa-tada animated"></i>
				<strong class="font__weight-semibold">{{ message }}!</strong>
				v√©rifier le tableau pour consulter le match
			</div>

		{% endfor %}


		<div class="container">
			<div class="row ">

				{% for jeu in jeux %}
					<div class="col-xl-6 col-lg-4 col-md-6 col-sm-9">
						<div class="squad-item">
							<div class="squad-thumb">
								<a 
								{% if permission == "admin" %}
								href="/jeu/{{jeu.id}}"
								{% else %}
									href="/tournoi/?id={{jeu.id}}"
								{% endif %}
								>
								<img src="{{ asset('assets/img/jeux/'~jeu.image~'/main.png') }}" alt="">
								</a>
							</div>
							<div class="squad-content">
								<div class="squad-info">
									<h4 class="title">
										<a 
										{% if permission == "admin" %}
										href="/jeu/{{jeu.id}}"
										{% else %}
										href="/tournoi/?id={{jeu.id}}"
										{% endif %}
										>{{ jeu.nom }}</a>
									</h4>
									<span>{{ jeu.type }}</span>
								</div>
								
							</div>
						</div>
					</div>
				{% else %}
					<h1>error</h1>
				{% endfor %}
				
				

				{% if permission == "admin" %}
				<div class="col-xl-6 col-lg-4 col-md-6 col-sm-9">
					<div class="squad-item">
						<div class="squad-thumb">
							<a href="/jeu/new" style="width: 30%;margin-inline: auto;display:flex;height:250px;align-items:center">
							<img style="border:none;height:auto" src="{{ asset('assets/img/add.png') }}" alt="">
							</a>
						</div>
						
					</div>
				</div>
				
				{% endif %}
				{{knp_pagination_render(jeux) }}

			</div>
		</div>
	</section>{# <br>
						    <a href="{{ path('app_tmatchs_new') }}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="#d53235" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><line x1="40" y1="128" x2="216" y2="128" fill="none" stroke="#d53235" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="128" y1="40" x2="128" y2="216" fill="none" stroke="#d53235" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line></svg>     Ajouter Match</a> #}</div>
{% block footer %}
	{{ parent() }}
{% endblock %}
{% block js %}
	{{ parent() }}
{% endblock %}
<script>
	$(document).ready(function () {
$(".alert").delay(4000).hide(300);
});
</script>{% endblock %}
